---
title: "Compare Scenarios 2"
output:
  html_document:
    toc: yes
    number_sections: yes
  pdf_document:
    toc: yes
    number_sections: yes
params:
  mif: !r c("C:/Users/cschoetz/Documents/compareScenarios/mif/REMIND/REMIND_generic_SSP2EU-AMT-NDC.mif", "C:/Users/cschoetz/Documents/compareScenarios/mif/REMIND/REMIND_generic_SSP2EU-AMT-PkBudg1520.mif")
  hist: "C:/Users/cschoetz/Documents/compareScenarios/mif/REMIND/historical.mif"
  y: !r c(seq(2005, 2060, 5), seq(2070, 2100, 10))
  y_hist: !r c(seq(1960, 2020, 1), seq(2025, 2100, 5))
  y_bar: !r c(2010, 2030, 2050, 2100)
  reg: !r NULL
---


```{r includes, include=FALSE}
INCLUDE_SUMMARY <- TRUE
INCLUDE_MACRO <- FALSE
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  error = TRUE,
  fig.width = 14, 
  fig.height = 8
)
```

```{r, include=FALSE}
library(mip)
library(tidyverse)
library(quitte)
library(remind2)
library(gridExtra)
```

```{r read mifs}
read.quitte(params$mif, factors=FALSE) %>% 
  # In the variable names, remove all occurrences of one or two consecutive "+" followed by "|".
  mutate(variable = str_remove(variable, "\\+{1,2}\\|")) -> 
  data
read.quitte(params$hist, factors=FALSE) %>% 
  mutate(variable = str_remove(variable, "\\+{1,2}\\|")) ->
  histData

# filter regions
if (!is.null(params$reg)) {
  data %>% 
    filter(region %in% params$reg) ->
    data
  histData %>% 
    filter(region %in% params$reg) ->
    histData
}

# filter years
data %>% 
  filter(period %in% params$y) ->
  data
histData %>% 
  filter(period %in% params$y_hist) ->
  histData

# Define parameters for use in plotting.
mainReg <- "World"
y_bar <- params$y_bar
```



```{r summary, child=if (INCLUDE_SUMMARY) 'cs2_summary.Rmd'}
```

```{r summary, child=if (INCLUDE_MACRO) 'cs2_macro.Rmd'}
```

